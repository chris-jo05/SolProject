<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.mail.mapper.MailBoardMapper">

	<!-- 받은 메일함 조회 -->
	<select id="mailList" resultType="com.spring.mail.domain.MailBoardVo">
		select * from e_mail where e_id=#{e_id} order by m_senddate desc, m_no desc
	</select>
	
	<!-- 메일 하나 읽기 -->
	<select id="readMail" resultType="com.spring.mail.domain.MailBoardVo">
		select * from e_mail where m_no=#{m_no}
	</select>
	
	<!-- 메일을 읽을 경우 읽었는지에 대한 여부 수정-->
	<update id="readVal">
		update e_mail set m_read = #{m_read} where m_no = #{m_no}
	</update>
	
	<!-- 보낸 메일함 읽기 -->
	<select id="sendMailBox" resultType="com.spring.mail.domain.MailBoardVo">
		select * from e_mail where m_id = #{m_id} order by m_senddate desc, m_no desc
	</select>
	
	<!-- 메일 쓰기 -->
	<insert id="writeMail">
		insert into e_mail(m_title,m_content, e_id, eno, m_read, m_writer, m_id) 
		  values(#{m_title}, #{m_content}, #{e_id}, #{eno}, #{m_read}, #{m_writer}, #{m_id})
	</insert>
	
	<!-- 읽기페이지에서 메일 삭제 -->
	<delete id="deleteMail" >
		delete from e_mail where m_no=#{m_no}
	</delete>
	
	<!-- 메일 체크리스트 지우기 -->
	<delete id="deleteMailList" parameterType="java.util.List">
		delete from e_mail
			where
			<foreach collection="mNoList" item="item" separator="or" open="" close="">
				(m_no=#{item.m_no})
			</foreach>
	</delete>
	
</mapper>